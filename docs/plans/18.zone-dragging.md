# 18. Zone Dragging, Moving, and Centering

This plan outlines the implementation of the zone dragging, moving, and centering feature.

## 1. Vision & Core Concept ✅

The goal of this feature is to allow the user to move the zone around the canvas after it has been created. This will be done by updating the zone's x and y coordinates in the `zone` object.

*   **Zone Dragging:** The user will be able to drag the zone around the canvas by clicking and dragging on it.
*   **Zone Moving:** The user will be able to move the zone to a specific location on the canvas by entering the x and y coordinates in the GUI.
*   **Zone Centering:** The user will be able to center the zone on the canvas by clicking a button in the GUI.

## 2. State Management (`sketch.js`) ✅

The existing state variables will be retained. We will add a new state to track whether the user is currently dragging the zone.

```javascript
// Zonal Painting State
let zone = null; // Stores { x, y, width, height, graphics, transformState }
let zoneStartPos = null;
let isDraggingZone = false;

// In globals object for reactivity with GUI
globals.zoneExists = false;
globals.isDefiningZone = false;
globals.isZoneActive = false;
```

## 3. Rendering Pipeline (`p5.draw()`) ✅

The rendering pipeline will be updated to handle the dragging of the zone.

1.  Draw the main `drawingCanvas`.
2.  If a zone exists (`globals.zoneExists`), draw it at its current position.
3.  If the user is dragging the zone, draw a preview of the zone at the new position.
4.  Draw the `uiCanvas` for borders and other feedback.
5.  Clear the `uiCanvas`.

## 4. UI Flow & Lifecycle ✅

The UI flow will be modified to incorporate the new zone dragging functionality.

1.  **Initiation & Definition:** Unchanged.
2.  **Painting:** Unchanged.
3.  **Transformations:** Unchanged.
4.  **Committing/Flattening:** Unchanged.
5.  **Activation/Deactivation:** Unchanged.
6.  **Clearing:** Unchanged.
7.  **Dragging:**
    *   When the user clicks on the zone, set `isDraggingZone` to true.
    *   When the user drags the mouse, update the zone's x and y coordinates.
    *   When the user releases the mouse, set `isDraggingZone` to false.

## 5. Implementation Steps

### Step 1: Update `sketch.js` for Zone Dragging ✅

*   Add the `isDraggingZone` state variable.
*   Update the `mousePressed`, `mouseDragged`, and `mouseReleased` functions to handle the dragging of the zone.

### Step 2: Add GUI Controls for Moving and Centering ✅

*   Add input fields to the GUI to allow the user to enter the x and y coordinates of the zone.
*   Add a button to the GUI to allow the user to center the zone on the canvas.

## 6. Testing Strategy

*   **Unit Tests:**
    *   Verify that the zone's x and y coordinates are updated correctly when the user drags the zone.
    *   Verify that the zone is moved to the correct location when the user enters the x and y coordinates in the GUI.
    *   Verify that the zone is centered correctly when the user clicks the center button.
*   **E2E Tests:**
    *   Verify that the user can drag the zone around the canvas.
    *   Verify that the user can move the zone to a specific location on the canvas.
    *   Verify that the user can center the zone on the canvas.