<!DOCTYPE html>

<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <title>polychrome_03 : Built with Processing and Processing.js</title>
    <link href="./lib/core.css" rel="stylesheet" type="text/css" media="all">
    <!-- <script src="../p5.min.js"></script> -->
    <script src="./vendor/p5.js"></script>
    <script src="./vendor/dat.gui.min.js"></script>
</head>

<body>
    <div id="content">
        <div>
            <div id="sketch-holder">
                <!-- Our sketch will go here! -->
            </div>
            <noscript>
                <p>JavaScript is required to view the contents of this page.</p>
            </noscript>
        </div>
        <h1>polychrome text</h1>
        <p id="description"></p>
        <p>
            <a id='focus' href='#' alt='set focus to canvas'>focus on canvas</a>
        </p>

        <p>
            Mouse click and drag to paint (previous paints will fade slightly).
            <br /> Color and size are based on mouse position.
            <br />
            <span CLASS="keys">SPACE</span> - paint without fading previous actions
            <br />
            <span CLASS="keys">RIGHT/LEFT</span> - increase/decrease rotation of letters
            <br />
            <span class="keys">R</span> - reset rotation to 0
            <br />
            <span class="keys">z|Z</span> - shift canvas right|left 10 px (angle, different amount)
            <br />
            <span class="keys">x|X</span> - shift canvas up|down 10 px (angle, different amount)
            <br />
            <span class="keys">f|F</span> - flip canvas horizontally|vertically (NOT WORKING)
            <br />
            <span class="keys">123456</span> - preset painting macros
            <br />
            <span CLASS="keys">UP/DOWN</span> - change paint mode (TODO: change keys)
            <br />
            <span class="keys">M</span> - switch between grids and circles (TODO: change keys)
            <br />
            <span class="keys">Delete|Backspace</span> - clear the screen
        </p>
        <p id="sources">Source code:
            <a href="./javascript/pages/024.pde">polychrome</a> - More
            <a href="./PrantedMutter/Sketch">Web Sketches</a> - Built with
            <a href="http://processing.org" title="Processing">Processing</a>
            and
            <a href="http://processingjs.org" title="Processing.js">Processing.js</a>
        </p>
        <div>
            <textarea id='bodycopy'></textarea>
            <button id='applytext'>Apply text</button>
        </div>
    </div>
</body>
<script>

</script>
<script src="./lib/sketch.js"></script>

<script>
    var cvs
    var setupGui = function () {
        cvs = document.getElementsByTagName('canvas');
        if (cvs && cvs[0]) {
            cvs = cvs[0];
        }
        setfocus();
    }

    var setfocus = function () {
        cvs.focus();
    };

    var openCanvasInNewTab = function () {
        if (cvs) {
            img = cvs.toDataURL('image/jpg');
            // https://ourcodeworld.com/articles/read/682/what-does-the-not-allowed-to-navigate-top-frame-to-data-url-javascript-exception-means-in-google-chrome
            var win = window.open();
            win.document.write('<iframe src="' + img +
                '" frameborder="0" style="border:0; top:0px; left:0px; bottom:0px; right:0px; width:100%; height:100%;" allowfullscreen></iframe>');
        }
    };

    var fc = document.getElementById('focus');
    fc.onclick = setfocus;
</script>
<script>
    var obj = {
        name: "polychrome.text",
        num: 23,
        winner: true,
        open: openCanvasInNewTab,
        save: save_sketch,
        clear: clearCanvas,
        rotation: 0,
        paintMode: 0
    };
    var gui = new dat.GUI();

    // String field
    gui.add(obj, "name"); // TODO: use for saving? eh, probably not.....

    // Number field with slider
    gui.add(obj, "rotation").min(0).max(360).step(15);

    gui.add(obj, 'open');
    gui.add(obj, 'save');
    gui.add(obj, 'clear');
    gui.add(obj, 'paintMode', [0,1,2,3,4,5,6,7]) // work in-progress....
</script>

</html>